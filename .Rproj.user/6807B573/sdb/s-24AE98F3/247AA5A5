{
    "contents" : "# Get the data\n\ndata.dir = \"data\"\ndata.zip.path = sprintf(\"%s/dataset.zip\", data.dir)\n\ndir.create(data.dir, showWarnings = FALSE)\n\ndownload.file(\n    url = paste(\"https://d396qusza40orc.cloudfront.net/\", \n                \"getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip\",\n                sep = \"\"\n                ),\n    destfile = data.zip.path,\n    method = \"curl\",\n    quiet = TRUE\n    )\n\nunzip(data.zip.path, exdir = \"data\")\nunlink(data.zip.path)\n\n# Read the data\n\nsubjects = numeric(0)\ndata = matrix(nrow = 0, ncol = 561)\nlabels = numeric(0)\n\nfor(set.origin in c(\"train\", \"test\")) {\n    set.origin.dir = sprintf(\"%s/UCI HAR Dataset/%s\", data.dir, set.origin)\n    \n    subjects.part = read.table(sprintf(\"%s/subject_%s.txt\",\n                                       set.origin.dir, set.origin))\n    data.part = read.table(sprintf(\"%s/X_%s.txt\", set.origin.dir, set.origin),\n                           colClasses = \"numeric\")\n    labels.part = read.table(sprintf(\"%s/y_%s.txt\", set.origin.dir,\n                                     set.origin))\n    \n    subjects = rbind(subjects, subjects.part)\n    data = rbind(data, data.part)\n    labels = rbind(labels, labels.part)\n}\n\ndataset = data.frame(subjects, labels, data)\n\n# Extract mean and stdev measurements\n\nfeatures = read.table(sprintf(\"%s/UCI HAR Dataset/features.txt\", data.dir))\n\nfeatures.mean = grep(\"mean\\\\(\\\\)\", features[, 2])\nfeatures.stdev = grep(\"std\\\\(\\\\)\", features[, 2])\n\nfeatures.extract = sort(union(features.mean, features.stdev))\ncol.names = c(\"subject\", \"label.id\",\n              as.character(features[features.extract, 2]))\n\ndataset = dataset[, c(1, 2, features.extract + 2)]\ncolnames(dataset) = col.names\n\n# Descriptive activity labels\n\nlabels.path = sprintf(\"%s/UCI HAR Dataset/activity_labels.txt\", data.dir)\nlabels = read.table(labels.path, col.names = c(\"id\", \"activity\"))\n\ndataset = merge(dataset, labels, by.x = \"label.id\", by.y = \"id\")\ndataset = dataset[, -which(\"label.id\" %in% names(dataset))]\n\n# Write to file\n\nwrite.table(dataset, \"tidy-dataset.txt\", row.names = FALSE)\n\n# Summarize by subject and activity\n\ndataset.mean = aggregate(\n    x = dataset[, -which(colnames(dataset) %in% c(\"subject\", \"activity\"))],\n    by = list(dataset$subject, dataset$activity),\n    mean\n    )\n\ncolnames(dataset.mean)[1:2] = c(\"subject\", \"activity\")\n\n# Write summary to file\n\nwrite.table(dataset.mean, \"tidy-dataset-avg.txt\", row.names = FALSE)\n",
    "created" : 1408722524351.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1821272707",
    "id" : "247AA5A5",
    "lastKnownWriteTime" : 1408723098,
    "path" : "~/Desktop/GCDProject/run_analysis.R",
    "project_path" : "run_analysis.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}